<!DOCTYPE html>
<html>
    <head>
		 {% load static %}
        <meta charset="UTF-8">
        <title>个人中心--修改密码</title>
        <link href="css/style.css" rel="stylesheet" type="text/css"/>
       	<script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
		<script type="text/javascript" src="{% static 'js/lib/changeinfo/tab.js '%}"></script>
		<link rel="stylesheet" href="{% static 'js/lib/bootstrap-3.3.7-dist/css/bootstrap.css '%}">
		<script src="{% static 'js/lib/jquery2.2.4/jquery-2.2.4.min.js '%}"></script>
		<script src="{% static 'js/lib/bootstrap-3.3.7-dist/js/bootstrap.min.js '%}"></script>
		<link rel="stylesheet" type="text/css" href="{% static 'css/yangshi.css '%}" />
    </head>
    <body style="background-color: #f5f5f5;">
		<div class="container" style="margin-top: 10px;">
			<div class=" col-lg-offset-2 col-md-8">
				<div style="margin-bottom: 30px;">
					<h3 style="display: inline-block;color: orangered;">小米账号</h3>
					<a style="float: right;padding-top: 30px;" href="">退出</a>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="col-lg-offset-2 col-md-3">
						<div class="panel">
							<div class="panel-body">
								<ul class="nav text-center" role="tablist">
									<img src="img/3.jpg" style="height: 122px;width: 122px; margin-bottom: 30px;margin-top: 30px;"  alt="..." class="img-circle tt_img">
									<h4>用户昵称</h4>
									<h5>编号</h5>
									<li role="presentation" class="active"><a href="#" >查看信息</a></li>
									<li role="presentation"><a href="#">修改信息</a></li>
									<li role="presentation"><a href="#xgmm" aria-controls="xgmm" role="tab" data-toggle="tab">修改密码</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="panel">
							<div class="panel-body">
								<div class="tab-content">
									<div>
										<h3>密码修改</h3>
									</div>
									<div role="tabpanel" class="tab-pane active" id="xgmm">
										<div class="aui-flex b-line">
											<div  class="aui-invoice-name">原密码：</div>
											<div class="aui-flex-box">
												<input name="userpasswod" id="userpasswod" type="password" placeholder="输入原密码">
											</div>
										</div>
										<div class="aui-flex b-line">
											<div class="aui-invoice-name">新密码</div>
											<div class="aui-flex-box">
												<input name="newuserpasswod" id="newuserpasswod" type="password" placeholder="输入新密码">
											</div>
										</div>
										<div class="aui-flex b-line">
											<div class="aui-invoice-name">确认密码</div>
											<div class="aui-flex-box">
												<input name="quserpasswod" id="quserpasswod" type="password" placeholder="确认密码">
											</div>
										</div>
										<div class="aui-flex b-line">
											<div class="aui-invoice-name"></div>
											<div class="aui-flex-box">
												<!-- <input type="text" placeholder="您的收货地址"> -->
												<button style="height: 40px;width: 70px;" class="btn btn-danger" type="submit">保存</button>
												<button style="height: 40px;width: 70px;" class="btn btn-default" type="submit">取消</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		</div>
		<script>


			function xiugai_mima(){
					userpasswod = $("#userpasswod").val()
					newuserpasswod = $("#newuserpasswod").val()
					quserpasswod = $("#quserpasswod").val()

					console.info(userpasswod)
					console.info(newuserpasswod)
					console.info(quserpasswod)
					$.ajax({
						url: "/blog/changepwd/",
						method: "POST",
						data: {"userpasswod": userpasswod, "newuserpasswod": newuserpasswod, "quserpasswod":quserpasswod, "csrfmiddlewaretoken":"{{ csrf_token }}"},
						dataType: "json",
						success: function (data) {
							if (data.success) {
								$("#msg1").html(data.msg1)
								$("#userpasswod").val("")
								$("#newuserpasswod").val("")
								$("#quserpasswod").val("")
								//演示前端跳转页面
								window.location.pathname = "/blog/index/"


							} else {
								$("#msg1").html("密码修改失败！！！")
							}
						}
					})
				}




				$(function () {
				    $("#userpasswod").on("blur",function () {
				        userpasswod = $(this).val()
						// content = $(this).UE.getContent()
						if (userpasswod.length < 1 ) {
						    $("#msg").html("原密码不能为空")
						}else {
						    $("#msg").html("格式正确")
						}
			        })
			    })

					$(function () {
							$("#newuserpasswod").on("blur",function () {
									newuserpasswod = $(this).val()
							// content = $(this).UE.getContent()
							if (newuserpasswod.length < 1 ) {
									$("#msg").html("新密码不能为空")
							}else if (6 > newuserpasswod.length > 1 ) {
									$("#msg").html("密码长度少于六位")
							}
							else{
								$("#msg").html("密码格式正确")
							}
								})
						})

						$(function () {
								$("#quserpasswod").on("blur",function () {
										quserpasswod = $(this).val()
								// content = $(this).UE.getContent()
								if (quserpasswod.length < 1 ) {
										$("#msg").html("确认密码不能为空")
								}else if(6 > qnewuserpasswod.length > 1){
										$("#msg").html("密码长度少于六位")
								}
								else {
										if( $("#newpassword").val() != $("#qnewpassword").val())
										{
											$("#msg").html("两次密码 不一致请重新输入")
										}
										else{
											$("#msg").heml("格式正确")
										}
								}
									})
							})
		</script>
    </body>
</html>
